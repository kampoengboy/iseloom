<div class="container" style="background-color:white">
    <br>
    <% if(session.authenticated && session.User.admin) {%>
      <legend>Publish Problem Sets</legend>
    <% } else { %>
      <legend>Problem Sets</legend>
    <% } %>
    <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped">
            <thead>
                  <th></th>
                  <th colspan="3">SUBMISSIONS</th>
                  <th></th>
            </thead>
          <tbody>
              <tr>
                <td>NAME</td>
                <td>TOTAL</td>
                <td>ACC.</td>
                <td>RATIO</td>
                <td>DIFFICULTY</td>
                <% if(session.authenticated) { %>
                        <% if(session.User.admin) { %>
                            <td></td>
                        <% } %>
                <% } %>
              </tr>
              <% var idx = 1 %>
              <% _.each(problemsPublish, function(problem){%>
                <tr>
                    <% var tmp = []; %>
                    <% var tot = 0 ; %>
                    <% var acc = 0 ; %>
                    <td><a href="/problem/preview?prob=<%=problem.valName%>"><%=problem.name%></a></td>
                    <td>
                      <% if(problemSubs.hasOwnProperty(problem.id)) { %>
                        <%= problemSubs[problem.id].total %>
                      <% } else { %>
                        0
                      <% } %>
                    </td>
                    <td>
                      <% if(problemSubs.hasOwnProperty(problem.id)) { %>
                        <%= problemSubs[problem.id].acc %>
                      <% } else { %>
                        0
                      <% } %>
                    </td>
                    <td>
                      <% if(problemSubs.hasOwnProperty(problem.id)) { %>
                        <%= Math.round(problemSubs[problem.id].acc/problemSubs[problem.id].total*100) %>%
                      <% } else { %>
                        0%
                      <% } %>
                    </td>
                     <% if(problem.difficulty==0) { %>
                        <td>EASY</td>
                     <% } else if(problem.difficulty==1) { %>
                        <td>MEDIUM</td>
                     <% } else { %>
                        <td>HARD</td>
                     <% } %>
                     <% if(session.authenticated) { %>
                        <% if(session.User.admin) { %>
                            <td><a class="btn btn-danger" href="/problem/unpublish/<%=problem.id%>"><span class="glyphicon glyphicon-export" aria-hidden="true"></span> Unpublish</a></td>
                        <% } %>
                     <% } %>
                </tr>
                <% idx++ %>
              <%})%>
          </tbody>
        </table>
    </div>
    <% if(session.authenticated && session.User.admin) {%>
      <br>
      <legend>Not Publish Problem Sets</legend>
      <div class="table-responsive">
          <table class="table table-bordered table-hover table-striped">
              <thead>
                  <th>NAME</th>
                  <th></th>
              </thead>
            <tbody>
                <% var idx = 1 %>
                <% _.each(problemsNotPublish, function(problem){%>
                  <tr>
                      <td><%=problem.name%></td>
                      <td><a class="btn btn-primary" href="/problem/publish/<%=problem.id%>"><span class="glyphicon glyphicon-export" aria-hidden="true"></span> Publish</a> <a href="/problem/preview?prob=<%=problem.valName%>"class="btn btn-success"> Preview</a></td>
                  </tr>
                  <% idx++ %>
                <%})%>
            </tbody>
          </table>
      </div>
    <% } %>
</div>